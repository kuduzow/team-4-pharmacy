# Файл конфигурации для AIR - инструмента hot reload для Go
# Этот файл должен находиться в корне проекта pharmacy

# ==================== ОСНОВНЫЕ НАСТРОЙКИ ====================
# Корневая директория проекта (отсюда air будет искать файлы)
root = "."
# Директория для временных файлов (здесь будет бинарник после сборки)
tmp_dir = "tmp"

# ==================== НАСТРОЙКИ СБОРКИ ====================
[build]
  # Команда для сборки проекта:
  # - go build - компилирует Go код
  # - -o ./tmp/pharmacy - указывает куда сохранить бинарник
  # - ./cmd/pharmacy - путь к пакету с main функцией
  cmd = "go build -o ./tmp/pharmacy ./cmd/pharmacy"
  
  # Путь к скомпилированному бинарнику (тот же что в команде выше)
  bin = "./tmp/pharmacy"
  
  # Команда для запуска бинарника (можно добавить флаги если нужно)
  full_bin = "./tmp/pharmacy"
  
  # ⚠️ ВАЖНО: Задержка перед пересборкой после изменения файлов
  # 1000 мс = 1 секунда. Нужно чтобы избежать множественных пересборок
  # при сохранении нескольких файлов сразу
  delay = 1000
  
  # Какие типы файлов отслеживать для пересборки
  # Достаточно только .go файлов, так как это Go проект
  include_ext = ["go"]
  
  # Какие папки ИГНОРИРОВАТЬ (не отслеживать изменения в них)
  exclude_dir = [
    "tmp",       # наша временная папка
    "vendor",    # зависимости проекта
    "testdata",  # тестовые данные
    ".git"       # папка гита
  ]
  
  # Какие файлы ИГНОРИРОВАТЬ по названию
  exclude_regex = [
    "_test.go"   # игнорировать тестовые файлы
  ]
  
  # ⚠️ ВАЖНО: Отправлять ли сигнал остановки старой версии приложения
  # true = отправлять interrupt сигнал (более чистый выход)
  send_interrupt = true
  
  # ⚠️ ВАЖНО: Задержка перед принудительной остановкой
  # Если приложение не остановилось за 500ms после interrupt,
  # air принудительно завершит процесс
  kill_delay = "500ms"

# ==================== НАСТРОЙКИ ЛОГИРОВАНИЯ ====================
[log]
  # Показывать ли время в логах
  # false = не показывать (логи будут чище)
  time = false

# ==================== НАСТРОЙКИ ЦВЕТОВ ====================
[color]
  # Цвета для разных типов сообщений:
  app = "green"     # логи самого приложения
  build = "yellow"  # сообщения о сборке
  main = "magenta"  # основные логи air
  runner = "cyan"   # сообщения runner'а
  watcher = "blue"  # сообщения watcher'а

# ==================== РАЗНЫЕ НАСТРОЙКИ ====================
[misc]
  # Очищать ли временную папку при выходе из air
  # true = очищать (рекомендуется для чистоты)
  clean_on_exit = true

# ==================== НАСТРОЙКИ ЭКРАНА ====================
[screen]
  # Очищать ли экран консоли при каждой пересборке
  # false = не очищать (видно историю логов)
  clear_on_rebuild = false